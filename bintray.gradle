apply plugin: 'maven'
apply plugin: 'bintray-release'

Properties properties = new Properties()
properties.load(project.rootProject.file('local.properties').newDataInputStream())
publish {
    bintrayUser = properties.getProperty("BINTRAY_USER")
    bintrayKey = properties.getProperty("BINTRAY_KEY")
    artifactId = 'StateView'
    userOrg = 'lany192'
    groupId = 'com.lany'
    uploadName = 'StateView'
    publishVersion = '1.1.0'
    autoPublish = true
    dryRun = false
    desc = 'This is an Android custom view more, contained load, error, empty and abnormal network the four views as a result, for the vast majority of app interface switching'
    website = 'https://github.com/lany192/MultiStateView'
    issueTracker = 'https://github.com/lany192/MultiStateView/issues'
    repository = 'https://github.com/lany192/MultiStateView.git'
    licences = ['Apache-2.0']
}

task sourcesJar(type: Jar) {
    from android.sourceSets.main.java.srcDirs
    classifier = 'sources'
}

task javadoc(type: Javadoc) {
    options.encoding = "UTF-8"
    source = android.sourceSets.main.java.srcDirs
    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = 'javadoc'
    from javadoc.destinationDir
}

javadoc {
    options {
        encoding "UTF-8"
        charSet 'UTF-8'
        author true
        version true
        links "http://docs.oracle.com/javase/7/docs/api"
        title 'A custom multi state view for android'   // 文档标题
    }
}

artifacts {
    archives javadocJar
    archives sourcesJar
}